<!-- THIS IS AN AUTOGENERATED FILE: Don't edit it directly, instead change the schema definition in the code itself. -->

_Autogenerated Tag Syntax Documentation:_

---
An ensemble metric that computes PNear, an estimate of the Boltzmann probability that a molecule's conformation is close to a desired conformation, based on an ensemble of sampled conformations and their energies.  PNear was described in Bhardwaj, Bahl, Mulligan et al. (2016). Accurate de novo design of hyperstable constrained peptides.  Nature 538(7625):329-335. doi: 10.1038/nature19791.  Given N samples, it is defined by: PNear = sum_i( exp( -(R_i/lambda)^2) exp(-E_i/(kbt)) ) / sum_j( exp(-E_j/(kbt)) ), where E_i and E_j are the energies of the ith and jth samples, respectively, and R_i is the RMSD of the ith sample to the reference state.

```xml
<PNear name="(&string;)" label_prefix="(&string;)" label_suffix="(&string;)"
        output_mode="(tracer &string;)" output_filename="(&string;)"
        ensemble_generating_protocol="(&string;)"
        ensemble_generating_protocol_repeats="(1 &non_negative_integer;)"
        n_threads="(1 &non_negative_integer;)"
        use_additional_output_from_last_mover="(false &bool;)"
        compute_pnear_to_native="(true &bool;)"
        compute_pnear_to_lowestE="(false &bool;)" scorefxns="(&string_cslist;)"
        kbt="(0.62 &real;)" lambda="(2.5 &real;)"
        superimpose_for_rmsd="(true &bool;)"
        use_backbone_in_rmsd="(true &bool;)" use_CB_in_rmsd="(false &bool;)"
        use_sidechain_in_rmsd="(false &bool;)" native_file="(&string;)"
        native_preparation_protocol="(&string;)"
        backbone_residue_selector="(&string;)"
        sidechain_residue_selector="(&string;)" />
```

-   **label_prefix**: If provided, this prefix is prepended to the label for this ensemble metric (with an underscore after the prefix and before the ensemble metric name).
-   **label_suffix**: If provided, this suffix is appended to the label for this ensemble metric (with an underscore after the ensemble metric name and before the suffix).
-   **output_mode**: The output mode for reports from this ensemble metric.  Default is 'tracer'.  Allowed modes are: 'tracer', 'tracer_and_file', or 'file'.
-   **output_filename**: The file to which the ensemble metric report will be written if output mode is 'tracer_and_file' or 'file'.  Note that this filename will have the job name and number prepended so that each report is unique.
-   **ensemble_generating_protocol**: An optional ParsedProtocol or other mover for generating an ensemble from the current pose.  This protocol will be applied repeatedly (ensemble_generating_protocol_repeats times) to generate the ensemble of structures.  Each generated pose will be measured by this metric, then discarded.  The ensemble properties are then reported.  If not provided, the current pose is measured and the report will be produced later (e.g. at termination with the JD2 rosetta_scripts application).
-   **ensemble_generating_protocol_repeats**: The number of times that the ensemble_generating_protocol is applied.  This is the maximum number of structures in the ensemble (though the actual number may be smaller if the protocol contains filters or movers that can fail for some attempts).  Only used if an ensemble-generating protocol is provided with the ensemble_generating_protocol option.  Defaults to 1.
-   **n_threads**: The number of threads to request for generating ensembles in parallel.  This is only used in multi-threaded compilations of Rosetta (compiled with extras=cxx11thread), and only when an ensemble-generating protocol is provided with the ensemble_generating_protocol option.  A value of 0 means to use all available threads.  In single-threaded builds, this must be set to 0 or 1.  Defaults to 1.  NOTE THAT MULTI-THREADING IS HIGHLY EXPERIMENTAL AND LIKELY TO FAIL FOR MANY ENSEMBLE-GENERATING PROTOCOLS.  When in doubt, leave this set to 1.
-   **use_additional_output_from_last_mover**: If true, this ensemble metric will use the additional output from the previous pose (assuming the previous pose generates multiple outputs) as the ensemble, analysing it and producing a report immediately.  If false, then it will behave normally.  False by default.
-   **compute_pnear_to_native**: Should PNear be computed using the structure provided with the -in:file:natie option as the reference state?  Defaults to true.  If multiple scorefunctions are provided, one PNear value is computed using each in turn.
-   **compute_pnear_to_lowestE**: Should PNear be computed using the structure provided with the -in:file:native option as the reference state?  Defaults to false.  If multiple scorefunctions are provided, one PNear value is computed using each in turn.
-   **scorefxns**: (REQUIRED) A comma-separated list of previously-defined scoring functions.  At least one must be provided.
-   **kbt**: The Boltzmann temperature, used to compute Boltzmann probabilities of conformational states.  Defaults to 0.62 kcal/mol, which is approximately physiological temperature.  Must be positive.
-   **lambda**: The breadth of the Gaussian, in Angstroms, used to determine whether the RMSD to the reference state is small enough for a sampled state to be considered 'near-native' or not.  The default value, 2.5 A, is appropriate for small proteins.  For peptides, a value of 1.5 A to 2.0 A is more appropriate.  Very large proteins or protein complexes might warrant a larger value.  Must be positive.
-   **superimpose_for_rmsd**: Set whether the poses should be superimposed (aligned) for the RMSD calculation.  The default is true, which is appropriate for PNear calculations for folding.  For PNear calculations for docking, users may want to set this to false (so that docked configuratinos that preserve backbone conformation but involve a different rigid-body transform than native register as high-RMSD states).
-   **use_backbone_in_rmsd**: Set whether backbone heavyatoms should be used in computing RMSD values.  True by default.  If no residue selector is provided with the backbone_residue_selector option, all residues in the pose are used if this option is set to true.
-   **use_CB_in_rmsd**: If this option is true, then the first sidechain heavyatom (CB in canonical amino acids) is included with the backbone heavyatoms when computing heavyatom RMSD.  Requires use_backbone_in_rmsd to be set to true.  False by default.
-   **use_sidechain_in_rmsd**: Set whether sidechain heavyatoms should be used in computing RMSD values.  False by default.  If no residue selector is provided with the sidehchain_residue_selector option, all residues in the pose are used if this option is set to true.
-   **native_file**: A PDB, CIF, or other structure file for the native pose.  Only used if compute_pnear_to_native is true. If this is left as an empty string (the default), then the file passed on the commandline with -in:file:native is used.
-   **native_preparation_protocol**: A mover applied to the native pose on load.  (This can be useful for setting up cyclic geometry, for example.)  Not used if not provided.
-   **backbone_residue_selector**: An optional residue selector to select the residues whose backbone heavyatoms (and first sidechain heavyatoms, if use_CB_in_rmsd is set to true) are used when computing RMSD values.  If this is not provided, all positions are used.  This option does nothing unless use_backbone_in_rmsd is set to true. The name of a previously declared residue selector or a logical expression of AND, NOT (!), OR, parentheses, and the names of previously declared residue selectors. Any capitalization of AND, NOT, and OR is accepted. An exclamation mark can be used instead of NOT. Boolean operators have their traditional priorities: NOT then AND then OR. For example, if selectors s1, s2, and s3 have been declared, you could write: 's1 or s2 and not s3' which would select a particular residue if that residue were selected by s1 or if it were selected by s2 but not by s3.
-   **sidechain_residue_selector**: An optional residue selector to select the residues whose sidechain heavyatoms are used when computing RMSD values.  If this is not provided, all positions are used.  This option does nothing unless use_sidechain_in_rmsd is set to true. The name of a previously declared residue selector or a logical expression of AND, NOT (!), OR, parentheses, and the names of previously declared residue selectors. Any capitalization of AND, NOT, and OR is accepted. An exclamation mark can be used instead of NOT. Boolean operators have their traditional priorities: NOT then AND then OR. For example, if selectors s1, s2, and s3 have been declared, you could write: 's1 or s2 and not s3' which would select a particular residue if that residue were selected by s1 or if it were selected by s2 but not by s3.

---
